<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Objective-C SDK: Optimizely Objective-C SDK Changelog</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Objective-C SDK
   &#160;<span id="projectnumber">1.x</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="interface_optimizely.html">Optimizely</a> Objective-C SDK Changelog </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>November 16, 2017</p>
<h3>New Features</h3>
<p>Introduced the following simplified initialization APIs:</p>
<ul>
<li><b>Synchronous initialization</b> maximizes for speed by allowing the user to initialize the client immediately with the latest cached datafile. If no datafile is saved or there is an error retrieving the saved datafile, then the bundled datafile is used. If no bundled datafile is provided by the developer, then the SDK will return a dummy client.</li>
</ul>
<div class="fragment"><div class="line">/**</div><div class="line">* Synchronously initializes the client using the latest</div><div class="line">* cached datafile with a fallback of the bundled datafile</div><div class="line">* (i.e., the datafile provided in the OPTLYManagerBuilder</div><div class="line">* during the manager initialization).</div><div class="line">*</div><div class="line">* If the cached datafile fails to load, the bundled datafile</div><div class="line">* is used.</div><div class="line">*</div><div class="line">*/</div><div class="line">- (nullable OPTLYClient *)initialize;</div></div><!-- fragment --><ul>
<li><b>Asynchronous initialization</b> allows the user to maximize having the most up-to-date datafile. The SDK attempts to download the datafile asynchronously. In the case that there is an error in the datafile download, the latest cached datafile (if one exists) is used. If there are no updates in the datafile, then the datafile is not downloaded and the latest cached datafile is used. If the cached datafile fails to load, then the bundled datafile is used.</li>
</ul>
<div class="fragment"><div class="line">/**</div><div class="line">* Asynchronously initializes the client using the latest</div><div class="line">* downloaded datafile with a fallback of the bundled datafile</div><div class="line">* (i.e., the datafile provided in the OPTLYManagerBuilder</div><div class="line">* during the manager initialization).</div><div class="line">*</div><div class="line">* In the case that there is an error in the datafile download,</div><div class="line">*  the latest cached datafile (if one exists) is used.</div><div class="line">*</div><div class="line">* If there are no updates in the datafile, then the datafile is not</div><div class="line">*  downloaded and the latest cached datafile is used.</div><div class="line">*</div><div class="line">* If the cached datafile fails to load, the bundled datafile</div><div class="line">*  is used.</div><div class="line">*</div><div class="line">* @param callback The block called following the initialization</div><div class="line">*   of the client.</div><div class="line">*/</div><div class="line">- (void)initializeWithCallback:(void(^ _Nullable)(NSError * _Nullable error,</div><div class="line">OPTLYClient * _Nullable client))callback;</div></div><!-- fragment --> <h3>Bug Fixes:</h3>
<ul>
<li>Crash caused by <code>Fatal Exception: NSRangeException</code> in <code>OPTLYHTTPRequestManager.m</code>. This crash occurred during a backoff retry in a datafile download or event dispatch because data strutures that were not threadsafe (used only for testing) were being modified. To resolve this, the data structures were wrapped in a flag and are only modifiable if unit tests are running.</li>
</ul>
<h3>Cleanup:</h3>
<ul>
<li>Fix migration to Xcode 9.0 compiler warnings regarding "NSError * __autoreleasing *" and "(^)(void) in blocks".</li>
<li>DemoApp Swift code, icons, storyboards updated to Xcode 9.1.</li>
<li>Pod updates.</li>
</ul>
<p>October 6, 2017</p>
<h3>New Features</h3>
<ul>
<li>Numeric metrics, which allows the user to create an event tag that is tracked using numeric values</li>
</ul>
<h3>Bug Fixes</h3>
<ul>
<li>Fixed crash when audience has no value.</li>
<li>Fixed datafile and event dispatcher backoff retry failure.</li>
<li>Fixed crash caused by missing value in attributes.</li>
<li>Removed obsolete segmentID as a key for attributes.</li>
<li>Pulled in JSONModel and FMDB to local source and renamed the class and libraries so that they are not pod dependencies.</li>
</ul>
<h3>Breaking Changes</h3>
<ul>
<li>Supply your own FMDB or JSONModel or use OPTLYFMDB or <a class="el" href="interface_o_p_t_l_y_j_s_o_n_model.html">OPTLYJSONModel</a> if you previously counted on third party FMDB or JSONModel being present.</li>
</ul>
<p>August 28, 2017</p>
<h3>New Features</h3>
<ul>
<li>Added the forced bucketing feature, which allows you to force users into variations in real time for QA purposes without requiring datafile downloads from the network. The following APIs have been introduced:</li>
</ul>
<div class="fragment"><div class="line">/**</div><div class="line">* Force a user into a variation for a given experiment.</div><div class="line">* The forced variation value does not persist across application launches.</div><div class="line">*</div><div class="line">* @param experimentKey The key for the experiment.</div><div class="line">* @param userId The user ID to be used for bucketing.</div><div class="line">* @param variationKey The variation key to force the user into.</div><div class="line">*</div><div class="line">* @return boolean A boolean value that indicates if the set completed successfully. </div><div class="line">*/</div><div class="line">- (BOOL)setForcedVariation:(nonnull NSString *)experimentKey</div><div class="line">                    userId:(nonnull NSString *)userId</div><div class="line">              variationKey:(nonnull NSString *)variationKey;</div></div><!-- fragment --><div class="fragment"><div class="line">/**</div><div class="line">* Gets the forced variation for a given user and experiment.</div><div class="line">*</div><div class="line">* @param experimentKey The key for the experiment.</div><div class="line">* @param userId The user ID to be used for bucketing.</div><div class="line">*</div><div class="line">* @return The variation the user was bucketed into. This value can be nil if the </div><div class="line">* forced variation fails. </div><div class="line">*/</div><div class="line">- (nullable OPTLYVariation *)getForcedVariation:(nonnull NSString *)experimentKey</div><div class="line">                                         userId:(nonnull NSString *)userId;</div></div><!-- fragment --><ul>
<li>Added the bucketing ID feature, which allows you to decouple bucketing from user identification so that a group of users who have the same bucketing ID are put into the same variation.</li>
<li>User Profile refactor, which includes a class rename to <code>User Profile Service</code>, along with the following API additions:</li>
</ul>
<div class="fragment"><div class="line">/**</div><div class="line"> * Returns a user entity corresponding to the user ID.</div><div class="line"> *</div><div class="line"> * @param userId The user id to get the user entity of.</div><div class="line"> * @returns A dictionary of the user profile details.</div><div class="line"> **/</div><div class="line">- (nullable NSDictionary *)lookup:(nonnull NSString *)userId;</div></div><!-- fragment --> <div class="fragment"><div class="line">/**</div><div class="line"> * Saves the user profile.</div><div class="line"> *</div><div class="line"> * @param userProfile The user profile.</div><div class="line"> **/</div><div class="line">- (void)save:(nonnull NSDictionary *)userProfile;</div></div><!-- fragment --><ul>
<li>Added default attributes.</li>
</ul>
<h3>Bug Fixes</h3>
<ul>
<li>Fixed crash with string revenues in event tags.</li>
</ul>
<p>August 7, 2017</p>
<h3>New Features</h3>
<ul>
<li>Added Apple App Extension support by adding <code>APPLICATION_EXTENSION_API_ONLY = YES</code> to Build Settings of all <a class="el" href="interface_optimizely.html">Optimizely</a> frameworks.</li>
</ul>
<h3>Bug Fixes</h3>
<ul>
<li>Fixed potential bugs identified by Apple's Xcode static analyzer Analyze.</li>
</ul>
<p>July 28, 2017</p>
<h3>Bug Fixes</h3>
<ul>
<li>Fixed a <code>dispatchEvent</code> crash by changing a concurrent queue to a serial queue &ndash; this was causing one of the properties we were accessing not thread-safe.</li>
</ul>
<p>July 20, 2017</p>
<h3>Bug Fixes</h3>
<ul>
<li>Fixed a crash caused by a dangling pointer when <code>dispatchEvent</code> is called. <code>strongSelf</code> captures the state of self (which can be an <code>eventDispatcher</code> object or <code>nil</code>) at the time the block is called. <code>strongSelf</code> will hold onto whatever it is referencing for the duration of the block execution. Therefore, <code>strongSelf</code> is still pointing to <code>pendingDispatchEvents</code> even when it gets deallocated at the time the <code>eventDispatcher</code> is deallocated. This issue was resolved by not capturing <code>self</code> using <code>strongSelf</code> and keeping the <code>self</code> reference to <code>self</code> or <code>weakSelf</code>.</li>
</ul>
<p>July 7, 2017</p>
<h3>Bug Fixes</h3>
<ul>
<li>Added <code>NS_SWIFT_NOTHROW</code> to make 4 <code>variableXxx:...:error:</code> Swift method signatures more consistent in appearance.</li>
</ul>
<h3>Breaking Changes</h3>
<ul>
<li>Signatures for 2 existing <code>variableXxx:...:error:</code> Swift methods changed.</li>
</ul>
<p>May 23, 2017</p>
<h3>New Features</h3>
<ul>
<li>Added unexported_symbols.sh to create unexported_symbols.txt which hides all third-party dependency symbols in the Universal frameworks.</li>
</ul>
<h3>Breaking Changes</h3>
<ul>
<li>Supply your own FMDB or JSONModel if you previously counted on Universal frameworks exposing these third-party dependencies.</li>
</ul>
<p>May 2, 2017</p>
<h3>New Features</h3>
<ul>
<li>Added the Objective-C universal framework, which allows users to install the SDK without a third-party dependency manager.</li>
<li>Added the event tags parameter in the track API, which allows user to pass in more than one event tags at a time. The new events parameter is a map of event tag names to event tag values, which can be an NSNumber that contains a float, double, integer, or boolean, or an NSString: <div class="fragment"><div class="line">- (void)track:(nonnull NSString *)eventKey</div><div class="line">       userId:(nonnull NSString *)userId</div><div class="line">    eventTags:(nonnull NSDictionary&lt;NSString *, id&gt; *)eventTags;</div></div><!-- fragment --> The track API with just one event value is still available, but will be deprecated after two releases: <div class="fragment"><div class="line">- (void)track:(nonnull NSString *)eventKey</div><div class="line">       userId:(nonnull NSString *)userId</div><div class="line">   eventValue:(nonnull NSNumber *)eventValue __attribute </div></div><!-- fragment --></li>
<li>Updated the README with instructions for Carthage and Universal framework installations.</li>
</ul>
<h3>Bug Fixes</h3>
<ul>
<li>Fixed multiple base conditions audience parsing (merged the external pull request from : <a href="https://github.com/optimizely/objective-c-sdk/pull/124">https://github.com/optimizely/objective-c-sdk/pull/124</a>).</li>
<li>Fixed how NOT conditions are parsed in the audience evaluation.</li>
<li>Fixed event negative timestamps for 32-bit architecture devices.</li>
</ul>
<p>March 6, 2017</p>
<h3>New Features</h3>
<ul>
<li>Created a tvOS demo app.</li>
<li>Added integration sample code for iOS.</li>
</ul>
<h3>Bug Fixes</h3>
<ul>
<li>Initializing the client with the saved datafile <code>initialize()</code> or <code>-(<a class="el" href="interface_o_p_t_l_y_client.html">OPTLYClient</a> *)initialize</code> now pulls from the saved datafile (before, this method was dependent on the builderâ€™s datafile).</li>
<li>Fixed an SQLite error that was occurring when multiple FMDatabaseQueues were created.</li>
<li>Fixed a bug with the events cache for tvOS such that when the app is background, the events are not purged.</li>
<li>Experiment status is now checked so that users are not bucketed into a variation if the experiment is paused.</li>
<li>Fixed linking errors when building and running demo apps on iOS and tvOS devices.</li>
<li>Copyright header updates.</li>
</ul>
<p>January 23, 2017</p>
<ul>
<li>GA Release</li>
</ul>
<p>January 18, 2017</p>
<h3>New Features</h3>
<ul>
<li>Event Dispatcher: You can now specify a limit for how many events to persist on disk when the SDK is unable to send them.</li>
<li>Improved log messages.</li>
</ul>
<h3>Breaking Changes</h3>
<ul>
<li>All APIs have been changed to be more compatible with Swift language conventions.</li>
</ul>
<h3>Bug Fixes</h3>
<ul>
<li>User Profile: Persist experiment and variation IDs instead of keys. Allow multiple experiment and variation mappings to be stored for each user.</li>
<li>Whitelisting: Whitelisted variations will not be persisted in User Profile. Whitelisting will not check User Profile for bucketing information.</li>
<li>Track Event: Conversion events will no longer be sent if the experiments the event is part of do not pass audience evaluation.</li>
</ul>
<p>December 22, 2016</p>
<h3>New Features</h3>
<ul>
<li>IP Anonymization: Anonymize the IPs of your end users. <a class="el" href="interface_optimizely.html">Optimizely</a> will remove the last octect of IPV4 addresses before storing them.</li>
<li>Datafile Versioning: Each <a class="el" href="interface_optimizely.html">Optimizely</a> SDK will download a specific datafile version matching the SDK to ensure backwards compatibility.</li>
<li><a class="el" href="interface_optimizely.html">Optimizely</a> Notifications: <a class="el" href="interface_optimizely.html">Optimizely</a> will post notifications to the notification center when activate or track are called successfully. Developers can subscribe to these notifications to send the bucketing information to other analytics SDKs.</li>
</ul>
<h3>Breaking Changes</h3>
<ul>
<li>Live variable getters have been changed.</li>
</ul>
<p>December 9, 2016</p>
<h3>New Features</h3>
<ul>
<li>Introduced the <code><a class="el" href="class_o_p_t_l_y_datafile_manager-p.html">OPTLYDatafileManager</a></code> to manage fetching, syncing, and persisting the <a class="el" href="interface_optimizely.html">Optimizely</a> datafile.</li>
<li>Introduced the <code><a class="el" href="protocol_o_p_t_l_y_user_profile-p.html">OPTLYUserProfile</a></code> module to persist experiment and variation bucketing for users.</li>
<li>Created the <code>OptimizelySDKEventDispatcher</code> to keep a reference to a more advanced <code><a class="el" href="class_o_p_t_l_y_event_dispatcher-p.html">OPTLYEventDispatcher</a></code>.</li>
<li>Introduced <code><a class="el" href="protocol_o_p_t_l_y_manager-p.html">OPTLYManager</a></code> and <code><a class="el" href="interface_o_p_t_l_y_client.html">OPTLYClient</a></code> as part of the OptimizelySDKShared module. The Client wraps the <a class="el" href="interface_optimizely.html">Optimizely</a> core in order to prevent crashes. The Manager oversees the datafile manager and uses it to initialize Client instances and caches the most recently updated Client for easy of access.</li>
<li>When you initialize the Manager, you can pass in your own custom modules of the Datafile Manager, Event Dispatcher, Error Handler, Logger, and User Profile and these will be passed on to the Client and <a class="el" href="interface_optimizely.html">Optimizely</a> Core when they are initialized.</li>
<li>Live Variables: experiment on variable values in real-time. You can control these values from the <a class="el" href="interface_optimizely.html">Optimizely</a> UI to roll out features and tweak behavior of your app in real time.</li>
</ul>
<p>September 27, 2016</p>
<p>Initial Release</p>
<ul>
<li>Released <a class="el" href="interface_optimizely.html">Optimizely</a> SDK AB Testing SDKs through CocoaPods.</li>
<li>Developers can activate experiments and track experiments. </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
